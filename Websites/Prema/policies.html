<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>policies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="policies_files/libs/clipboard/clipboard.min.js"></script>
<script src="policies_files/libs/quarto-html/quarto.js"></script>
<script src="policies_files/libs/quarto-html/popper.min.js"></script>
<script src="policies_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="policies_files/libs/quarto-html/anchor.min.js"></script>
<link href="policies_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="policies_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="policies_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="policies_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="policies_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="policies_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="policies_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="what-is-the-european-unions-approach-to-combating-energy-poverty" class="level2">
<h2 class="anchored" data-anchor-id="what-is-the-european-unions-approach-to-combating-energy-poverty">What is the European Union’s Approach to Combating Energy Poverty?</h2>
<p>The EU is committed to tackling energy poverty and protecting vulnerable consumers. The concept of energy poverty was first introduced in EU law by the Directive on common rules for the internal electricity market (2009/72/EC). Since, it has been broadened in the narrative of a just and fair energy transition and over the past decade, the EU has increased its efforts and made energy poverty a key concept.</p>
<p>The message is clear: energy poverty must be tackled by addressing its root causes through structural and targeted measures, and in particular through energy efficiency. (European Commission n.d.)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="fit.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="762"></p>
</figure>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
EU Energy Policy Timeline
</caption>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
Event
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
May 2024
</td>
<td style="text-align:left;width: 30em; ">
Revised Energy Performance of Buildings Directive
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
October 2023
</td>
<td style="text-align:left;width: 30em; ">
EU Recommendation on energy poverty
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
September 2023
</td>
<td style="text-align:left;width: 30em; ">
Energy Efficiency Directive
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
2023
</td>
<td style="text-align:left;width: 30em; ">
EU Social Climate Fund
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
April 2022
</td>
<td style="text-align:left;width: 30em; ">
The Commission Energy Poverty and Vulnerable Consumers Coordination
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
13 October 2021
</td>
<td style="text-align:left;width: 30em; ">
Communication ’Tackling rising energy prices
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
21 July 2021
</td>
<td style="text-align:left;width: 30em; ">
‘Fit for 55’
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
2021
</td>
<td style="text-align:left;width: 30em; ">
Energy Poverty Advisory Hub (EPAH)
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
14 October 2020
</td>
<td style="text-align:left;width: 30em; ">
Commission Recommendation on energy poverty
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
14 October 2020
</td>
<td style="text-align:left;width: 30em; ">
‘Renovation Wave for Europe’
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
2019
</td>
<td style="text-align:left;width: 30em; ">
The draft NECPs require EU countries to describe their policies and measures addressing energy poverty
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
2018-2019
</td>
<td style="text-align:left;width: 30em; ">
‘Clean energy for all Europeans package’
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
November 2017
</td>
<td style="text-align:left;width: 30em; ">
The European Pillar of Social Rights
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
December 2016
</td>
<td style="text-align:left;width: 30em; ">
Launch of the Energy Poverty Observatory (EPOV)
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: lightgreen !important;">
2009
</td>
<td style="text-align:left;width: 30em; ">
Directive (2009/72/EC)
</td>
</tr>
</tbody>
</table>
<p>Source: European Commission Energy Poverty</p>
</div>
</div>
</section>
<section id="explanations-of-policies" class="level2">
<h2 class="anchored" data-anchor-id="explanations-of-policies">Explanations of Policies:</h2>
<section id="directive-200972ec" class="level3">
<h3 class="anchored" data-anchor-id="directive-200972ec">Directive (2009/72/EC):</h3>
<p>By establishing regulations for the EU’s internal electrical market, this directive addressed problems like energy poverty while fostering competitiveness and protecting rights of consumers.</p>
</section>
<section id="launch-of-the-energy-poverty-observatory-epov-december-2016" class="level3">
<h3 class="anchored" data-anchor-id="launch-of-the-energy-poverty-observatory-epov-december-2016">Launch of the Energy Poverty Observatory (EPOV) (December 2016):</h3>
<p>The purpose of EPOV was to collect information, exchange expertise, and increase awareness of energy poverty among EU member states.</p>
</section>
<section id="the-european-pillar-of-social-rights-november-2017" class="level3">
<h3 class="anchored" data-anchor-id="the-european-pillar-of-social-rights-november-2017">The European Pillar of Social Rights (November 2017):</h3>
<p>This program addressed energy poverty, emphasized social integration, and provided access to basic amenities like energy.</p>
</section>
<section id="clean-energy-for-all-europeans-package-2018-2019" class="level3">
<h3 class="anchored" data-anchor-id="clean-energy-for-all-europeans-package-2018-2019">‘Clean Energy for All Europeans’ Package (2018-2019):</h3>
<p>A legislative package that emphasizes energy efficiency, renewable energy, and customer involvement in order to move toward greener energy systems.</p>
</section>
<section id="the-draft-necps-2019" class="level3">
<h3 class="anchored" data-anchor-id="the-draft-necps-2019">The draft NECPs (2019):</h3>
<p>Member states were obliged to include specific measures in their National Energy and Climate Plans (NECPs) in order to combat energy poverty.</p>
</section>
<section id="commission-recommendation-on-energy-poverty-14-october-2020" class="level3">
<h3 class="anchored" data-anchor-id="commission-recommendation-on-energy-poverty-14-october-2020">Commission Recommendation on Energy Poverty (14 October 2020):</h3>
<p>Offered member states advice on how to define and quantify energy poverty and put in place efficient measures to lessen it.</p>
</section>
<section id="renovation-wave-for-europe-14-october-2020" class="level3">
<h3 class="anchored" data-anchor-id="renovation-wave-for-europe-14-october-2020">‘Renovation Wave for Europe’ (14 October 2020):</h3>
<p>A plan to increase building energy efficiency through comprehensive renovations with the goals of lowering emissions, saving money, and reducing energy poverty.</p>
</section>
<section id="energy-poverty-advisory-hub-epah-2021" class="level3">
<h3 class="anchored" data-anchor-id="energy-poverty-advisory-hub-epah-2021">Energy Poverty Advisory Hub (EPAH) (2021):</h3>
<p>EPAH, the EPOV successor, assists local governments in creating and carrying out efficient energy poverty strategies.</p>
</section>
<section id="fit-for-55-21-july-2021" class="level3">
<h3 class="anchored" data-anchor-id="fit-for-55-21-july-2021">‘Fit for 55’ (21 July 2021):</h3>
<p>A extensive legislative package that includes energy poverty mitigation measures to bring EU policies into line with its 2030 climate target.</p>
</section>
<section id="communication-tackling-rising-energy-prices-october-13-2021" class="level3">
<h3 class="anchored" data-anchor-id="communication-tackling-rising-energy-prices-october-13-2021">Communication “Tackling Rising Energy Prices” (October 13, 2021):</h3>
<p>Described immediate and long-term steps to mitigate energy price volatility, with a focus on safeguarding consumers who are most at risk.</p>
</section>
<section id="the-commission-energy-poverty-and-vulnerable-consumers-coordination-april-2022" class="level3">
<h3 class="anchored" data-anchor-id="the-commission-energy-poverty-and-vulnerable-consumers-coordination-april-2022">The Commission Energy Poverty and Vulnerable Consumers Coordination (April 2022):</h3>
<p>Improved cooperation between member nations to combat energy poverty and aid disadvantaged groups.</p>
</section>
<section id="eu-social-climate-fund-2023" class="level3">
<h3 class="anchored" data-anchor-id="eu-social-climate-fund-2023">EU Social Climate Fund (2023):</h3>
<p>Developed with the goal of assisting those with low incomes in order to lessen the social effects of the energy transformation.<br>
</p>
</section>
<section id="energy-efficiency-directive-september-2023" class="level3">
<h3 class="anchored" data-anchor-id="energy-efficiency-directive-september-2023">Energy Efficiency Directive (September 2023):</h3>
<p>Updated to guarantee that disadvantaged populations gain from energy efficiency advancements and to establish more stringent energy-saving goals.</p>
</section>
<section id="eu-recommendation-on-energy-poverty-october-2023" class="level3">
<h3 class="anchored" data-anchor-id="eu-recommendation-on-energy-poverty-october-2023">EU Recommendation on Energy Poverty (October 2023):</h3>
<p>Revised recommendations for member states to embrace more all-encompassing strategies to address energy poverty.</p>
</section>
<section id="revised-energy-performance-of-buildings-directive-may-2024" class="level3">
<h3 class="anchored" data-anchor-id="revised-energy-performance-of-buildings-directive-may-2024">Revised Energy Performance of Buildings Directive (May 2024):</h3>
<p>Established challenging goals to increase building energy efficiency, alleviating energy poverty and supporting the EU’s energy and climate goals.</p>
</section>
</section>
<section id="how-have-these-policies-effected-poverty-over-time" class="level2">
<h2 class="anchored" data-anchor-id="how-have-these-policies-effected-poverty-over-time">How have these policies effected Poverty Over Time?</h2>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="policies_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Source: Eurostat</figcaption>
</figure>
</div>
</div>
</div>
<p>The graph shows the average rate of people in the EU who are at danger of poverty throughout time. After controlling for household size and other economic variables, this rate shows the proportion of individuals whose income is below the poverty line.Based on this graph we can see that poverty rate has been on a decline since 2020. This may be due the introduction of the above policies to help combat poverty and thus combating energy poverty. Economic circumstances, social policies, and larger EU initiatives to fight inequality and marginalization can all have an impact on variations over time. Economic crises, variations in employment rates, and changes in social welfare programs among EU member states may all be associated with noteworthy trends. The slow variations show how difficult it remains to combat poverty in the EU in a variety of economic environments.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>